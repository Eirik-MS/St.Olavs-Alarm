Version 4
SHEET 1 1596 680
WIRE 192 48 128 48
WIRE 448 48 320 48
WIRE 624 48 528 48
WIRE 672 48 624 48
WIRE 816 48 752 48
WIRE 880 48 816 48
WIRE 928 48 880 48
WIRE 1072 48 1008 48
WIRE 1168 48 1072 48
WIRE 1344 48 1248 48
WIRE 32 96 -96 96
WIRE 128 96 128 48
WIRE 128 96 32 96
WIRE 176 96 128 96
WIRE -96 112 -96 96
WIRE 176 112 176 96
WIRE 320 112 320 48
WIRE 32 128 32 96
WIRE 624 160 624 48
WIRE 688 160 624 160
WIRE 816 160 816 48
WIRE 816 160 752 160
WIRE 880 160 880 48
WIRE 944 160 880 160
WIRE 1072 160 1072 48
WIRE 1072 160 1008 160
WIRE -96 208 -96 192
WIRE 32 208 32 192
WIRE 32 208 -96 208
WIRE 176 208 176 192
WIRE 176 208 32 208
WIRE 320 208 320 192
WIRE 320 208 176 208
WIRE 32 272 32 208
FLAG 32 272 0
FLAG 192 48 SOC
FLAG 1344 48 BatP
IOPIN 1344 48 BiDir
SYMBOL res -112 96 R0
WINDOW 0 -224 4 Left 2
WINDOW 3 37 56 Invisible 2
SYMATTR InstName R_self-discharge
SYMATTR Value R={Rleak}
SYMBOL cap 16 128 R0
WINDOW 0 -322 32 Left 2
WINDOW 3 39 24 Invisible 2
SYMATTR InstName C_capacity
SYMATTR Value {3600*.225*AH}
SYMATTR SpiceLine IC={SOC}
SYMBOL res 544 32 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 Invisible 2
SYMATTR InstName R_series
SYMATTR Value R=0.1562*exp(-24.37*V(SOC))+0.07446
SYMBOL res 768 32 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 Invisible 2
SYMATTR InstName R_transient-S
SYMATTR Value R=0.3208*exp(-29.14*V(SOC))+0.04669
SYMBOL res 1024 32 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 Invisible 2
SYMATTR InstName R_transient-L
SYMATTR Value R=6.6038*exp(-155.2*V(SOC))+0.04984
SYMBOL cap 1008 144 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 Invisible 2
SYMATTR InstName C_transient-L
SYMATTR Value Q=x*(-6056*exp(-27.12*V(SOC))+4475)
SYMBOL cap 688 176 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 Invisible 2
SYMATTR InstName C_transient-S
SYMATTR Value Q=x*(-752.9*exp(-13.51*V(SOC))+703.6)
SYMBOL f 176 112 R0
WINDOW 3 24 80 Invisible 2
SYMATTR Value VBM 1
SYMATTR InstName F1
SYMBOL bv 320 96 R0
WINDOW 3 24 96 Invisible 2
SYMATTR Value V=-1.031*exp(-35*V(SOC))+3.685+0.2156*V(SOC)-0.1178*V(SOC)**2+0.3201*V(SOC)**3
SYMATTR InstName B1
SYMBOL voltage 1152 48 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -32 56 VBottom 2
SYMATTR InstName VBM
SYMATTR Value 0
TEXT -272 -24 Left 2 ;C_capacity = 3600 * .225 Ah = 810
TEXT -344 8 Left 2 ;R_self-discharge = arbitrarily large value (1 Meg)
TEXT 16 384 Left 2 !.param AH=1; Ampere Hours Capacity
TEXT 16 416 Left 2 !.param SOC=1.0
TEXT 16 448 Left 2 !.param Rleak=1Meg
