* C:\Users\eirik\Documents\02-Git\St.Olavs-Alarm\LTSpice\Battery Config.asc
XX3 Partall2 li-battery_cr2032
XX4 Partall2 li-battery_cr2032
XX5 Single li-battery_cr2032
I1 Partall2 0 PULSE(0.00007 0.5 1000 0.2 0.2 1 15 500)
R1 Partall2 0 10K
C1 Partall2 0 2.2µ
C2 Single 0 2.2µ
R2 Single 0 10K
XX1 Partall440 li-battery_cr2032
XX2 Partall440 li-battery_cr2032
I2 Partall440 0 PULSE(0.00007 0.5 1000 0.2 0.2 1 15 500)
R3 Partall440 0 10K
I3 Single 0 PULSE(0.00007 0.5 1000 0.2 0.2 1 15 500)
XX6 Single440 li-battery_cr2032
R4 Single440 0 10K
I4 Single440 0 PULSE(0.00007 0.5 1000 0.2 0.2 1 15 500)
XU1 0 Single440 GRM31CC80G227ME11
XU2 0 Partall440 GRM31CC80G227ME11

* block symbol definitions
.subckt li-battery_cr2032 BatP
R_self-discharge SOC 0 R={Rleak}
C_capacity SOC 0 {3600*.225*AH} IC={SOC}
R_series N002 N001 R=0.1562*exp(-24.37*V(SOC))+0.07446
R_transient-S N003 N002 R=0.3208*exp(-29.14*V(SOC))+0.04669
R_transient-L N004 N003 R=6.6038*exp(-155.2*V(SOC))+0.04984
C_transient-L N004 N003 Q=x*(-6056*exp(-27.12*V(SOC))+4475)
C_transient-S N002 N003 Q=x*(-752.9*exp(-13.51*V(SOC))+703.6)
F1 SOC 0 VBM 1
B1 N001 0 V=-1.031*exp(-35*V(SOC))+3.685+0.2156*V(SOC)-0.1178*V(SOC)**2+0.3201*V(SOC)**3
VBM N004 BatP 0
.param AH=1; Ampere Hours Capacity
.param SOC=1.0
.param Rleak=1Meg
.ends li-battery_cr2032

.tran 10000
.lib C:\Users\eirik\AppData\Local\LTspice\lib\sym\Murrata\High_dielectric_constant\3216_1206\GRM31CC80G227ME11.MOD
.backanno
.end
